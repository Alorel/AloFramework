<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>AloFramework by Alorel</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/Alorel/alo-framework">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/Alorel/alo-framework/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/Alorel/alo-framework/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>AloFramework</h1>
          <p>An incredibly lightweight and flexible MVC framework for PHP 5.4</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/Alorel">Alorel</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <p><img src="https://cloud.githubusercontent.com/assets/4998038/7528096/370297ba-f51b-11e4-9c26-5d01ac66fc4d.png" alt="aloframework"></p>

<p><a href="https://packagist.org/packages/alorel/alo-framework"><img src="https://poser.pugx.org/alorel/alo-framework/v/stable" alt="Latest Stable Version"></a> <a href="https://packagist.org/packages/alorel/alo-framework"><img src="https://poser.pugx.org/alorel/alo-framework/downloads" alt="Total Downloads"></a> <a href="https://packagist.org/packages/alorel/alo-framework"><img src="https://poser.pugx.org/alorel/alo-framework/v/unstable" alt="Latest Unstable Version"></a> <a href="https://packagist.org/packages/alorel/alo-framework"><img src="https://poser.pugx.org/alorel/alo-framework/license" alt="License"></a></p>

<p>Latest release: <a href="https://travis-ci.org/Alorel/alo-framework"><img src="https://travis-ci.org/Alorel/alo-framework.svg?branch=v1.0" alt="Release build status"></a> Master: <a href="https://travis-ci.org/Alorel/alo-framework"><img src="https://travis-ci.org/Alorel/alo-framework.svg?branch=master" alt="Mater Build Status"></a> Dev: <a href="https://travis-ci.org/Alorel/alo-framework"><img src="https://travis-ci.org/Alorel/alo-framework.svg?branch=develop" alt="Dev Build Status"></a></p>

<hr>

<h1>
<a id="table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Table of Contents</h1>

<ol>
<li><a href="#what-is-this">What is this?</a></li>
<li><a href="#licence">Licence</a></li>
<li>
<a href="#structure">Structure</a> [<a href="#general">General</a> | <a href="#namespaces">Namespaces</a>] </li>
<li>
<a href="#workflow">Workflow</a> [<a href="#main-concept">Main Concept</a> | <a href="#the-global-alo-class">The global Alo class</a> | <a href="#controllers">Controllers</a> | <a href="#views">Views</a>]</li>
<li><a href="#routing">Routing</a></li>
<li><a href="#logging">Logging</a></li>
<li><a href="#initial-setup">Initial setup</a></li>
<li><a href="#updating">Updating</a></li>
<li><a href="#running-tests">Running tests</a></li>
<li><a href="#latest-changes">Latest Changes</a></li>
<li><a href="#external-libraries">External Libraries</a></li>
</ol>

<hr>

<h1>
<a id="what-is-this" class="anchor" href="#what-is-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is this?</h1>

<p>AloFramework is an incredibly lightweight and flexible MVC framework for PHP 5.4+. It has a lot of built-in functionality including but not limited to:</p>

<ul>
<li>Memcached wrapper</li>
<li>Database connection class</li>
<li>MySQL or Memcached-based session manager</li>
<li>HTML form validator</li>
<li>Code testing suite</li>
<li>Email sender</li>
<li>Crontab editor</li>
<li>Object-oriented cURL wrapper</li>
<li>Object-oriented file manager</li>
<li>Remote SFTP file manager</li>
<li>Code testing suite</li>
<li>Code profiler</li>
</ul>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="licence" class="anchor" href="#licence" aria-hidden="true"><span class="octicon octicon-link"></span></a>Licence</h1>

<p>This product is licenced under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public Licence Version 3</a></p>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="structure" class="anchor" href="#structure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Structure</h1>

<h2>
<a id="general" class="anchor" href="#general" aria-hidden="true"><span class="octicon octicon-link"></span></a>General</h2>

<p>You will find code documentation under the <strong>docs</strong> directory, some setup scripts under <strong>setup</strong> and source files under <strong>src</strong>.
In <strong>src</strong> the main components are <strong>app<em>, *</em>resources</strong>, <strong>sys</strong> and files under the directory root.</p>

<ul>
<li>
<strong>sys</strong> contains all the framework files</li>
<li>
<strong>resources</strong> is where you're meant to put all your images, css and whatnot</li>
<li>
<strong>app</strong> is where your code should go</li>
<li>
<strong>.htaccess</strong> makes sure requests get routed correctly</li>
<li>
<strong>index.php</strong> contains some core constants</li>
</ul>

<p>^<a href="#table-of-contents">TOC</a></p>

<h2>
<a id="namespaces" class="anchor" href="#namespaces" aria-hidden="true"><span class="octicon octicon-link"></span></a>Namespaces</h2>

<p>The <strong>class</strong>, <strong>trait</strong> and <strong>interface</strong> directories found under <em>src/app</em> and <em>src/sys</em> follow a namespaced structure, e.g. the class <strong>Alo\Db\MySQL</strong> would be found in the file <em>class/alo/db/mysql.php</em>. Please not that <strong>all directory and file names should be lowercase</strong>.</p>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="workflow" class="anchor" href="#workflow" aria-hidden="true"><span class="octicon octicon-link"></span></a>Workflow</h1>

<h2>
<a id="main-concept" class="anchor" href="#main-concept" aria-hidden="true"><span class="octicon octicon-link"></span></a>Main concept</h2>

<p>For most projects, you will want to write your own classes that extend those of the framework's. That way you will be completely safe from losing any code during a framework upgrade. The built-in autoloader will automatically load any required interfaces found in <strong>app/class</strong>, <strong>app/interface</strong>, <strong>sys/class</strong> and <strong>sys/interface</strong>.</p>

<p>^<a href="#table-of-contents">TOC</a></p>

<h2>
<a id="the-global-alo-class" class="anchor" href="#the-global-alo-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>The global Alo class</h2>

<p>This class is always loaded by default and contains static references to objects which are <em>in most cases</em> used as singletons. You should try to load most of your classes into its static properties, e.g. you will usually only need one database connection, so you can assign it to Alo::$db and access it from anywhere in your code.</p>

<p>^<a href="#table-of-contents">TOC</a></p>

<h2>
<a id="controllers" class="anchor" href="#controllers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Controllers</h2>

<p>All controllers must go under <strong>app/controllers</strong> (accessible via the <strong>DIR_CONTROLLERS</strong> method), have the <strong>Controller</strong> namespace and extend the class <strong>Alo\Controller\AbstractController</strong>. To make this easier, you can write your own Abstract controller and extend that of Alo\ from within, for example:</p>

<p><strong>app/class/controller/abstractcontroller.php</strong></p>

<pre><code>namespace Controller;

class AbstractController extends Alo\Controller\AbstractController {
   //Your code
}
</code></pre>

<p><strong>app/class/controller/home.php</strong></p>

<pre><code>namespace Controller;

class Home extends AbstractController {
   //Your code
}
</code></pre>

<p>Only <strong>public, non-abstract, non-static methods will be used for routing</strong>. The default method for most controllers is <strong>index()</strong>. Controllers can be in any of <strong>DIR_CONTROLLERS</strong>' subdirectories.</p>

<p>^<a href="#table-of-contents">TOC</a></p>

<h2>
<a id="views" class="anchor" href="#views" aria-hidden="true"><span class="octicon octicon-link"></span></a>Views</h2>

<p>Any view can be loaded via <strong>Alo\Controller\AbstractController</strong>'s protected method <strong>loadView</strong>:</p>

<pre><code>/**
  * Loads a view
  *
  * @author Art &lt;a.molcanovas@gmail.com&gt;
  * @param string  $name   The name of the view without ".php".
  * @param array   $params Associative array of parameters to pass on to the view
  * @param boolean $return If set to TRUE, will return the view, if FALSE,
  *                        will echo it
  * @return null|string
  */
  protected function loadView($name, $params = [], $return = false) {
     // Code
  }
</code></pre>

<p>This will load a view under <strong>app/view/$name.php</strong>. You can provide parameters to pass on to the view via <strong>$params</strong>, e.g. if you pass on <strong>['foo' =&gt; 'bar']</strong> and echo <strong>$foo</strong> in the view, the output will be <strong>bar</strong>. If instead of echoing the output you want to retrieve it, provide <strong>$return</strong> with <strong>true</strong>. Each view can be reused during the same execution.</p>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="routing" class="anchor" href="#routing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Routing</h1>

<p>All routing is done in the <strong>router.php</strong> config file. By default, if a route is not found, the router will look in your <strong>controllers</strong> directory's root for an automatically calculated route: <strong><a href="http://www.domain.com/controller/method/arg1/arg2%5B...%5D/argN">www.domain.com/controller/method/arg1/arg2[...]/argN</a></strong>. This can be overwritten in the <strong>$routes</strong> array, where the array keys are case-insensitive regular expressions for the request URI (without delimiters or modifiers) and the values are configuration arrays containing the following keys (bold values mean the default values if the key is not set):</p>

<ul>
<li>dir =&gt; the controller subdirectory <strong>[./]</strong>
</li>
<li>class =&gt; which controller class to load <strong>[$default_controller] or URL-based</strong>
</li>
<li>method =&gt; which method to load <strong>[index or URL-based]</strong>
</li>
<li>args =&gt; array of arguments to pass on to the method. These can be hardcoded values or placeholders (<em>'\$1', '\$2'</em> etc) which will replace items in the regular expression (key). <strong>[empty array]</strong>
</li>
</ul>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="logging" class="anchor" href="#logging" aria-hidden="true"><span class="octicon octicon-link"></span></a>Logging</h1>

<p>All logging is done via the global static class <strong>\Log</strong>'s public methods - please refer to the documentation. You will can set the logging level (during the <a href="#initial-setup">Initial Setup</a> phase described below).</p>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="initial-setup" class="anchor" href="#initial-setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initial setup</h1>

<ul>
<li>You will want to copy the contents of <strong>sys/config</strong> into <strong>app/config</strong>. Open them and set the values as appropriate.</li>
<li>Open <strong>index.php</strong>, scroll to <strong>// ===== General setup BEGIN =====</strong> and set the values as you please.</li>
<li>Next you'll want to run the appropriate files under <strong>setup</strong> if you are using that functionality.</li>
</ul>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="updating" class="anchor" href="#updating" aria-hidden="true"><span class="octicon octicon-link"></span></a>Updating</h1>

<p>Updates are applied by following these 6 steps:</p>

<ol>
<li>Look through the changelog for to see if any changes will cause issues (e.g. a deprecated method being removed), prepare your code if necessary.</li>
<li>Make a copy of your <strong>index.php</strong> and <strong>.htaccess</strong> files.</li>
<li>Delete the above, as well as the <strong>sys</strong> directory.</li>
<li>Extract the new code. It will never contain files other than blank <strong>index.html</strong>s and <strong>sample.php</strong>s under <strong>app/</strong>, so no application code will be overwritten.</li>
<li>If there are any changes to <strong>.htaccess</strong>, merge them with your version.</li>
<li>Re-apply your personal settings under <strong>index.php</strong>'s <strong>// ===== General setup BEGIN =====</strong>
</li>
</ol>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="running-tests" class="anchor" href="#running-tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running tests</h1>

<p>When running PPHUnit tests be sure to use the <strong>phpunit.php</strong> bootstrap file from the root directory. It will make sure that all classes are loaded correctly and that the framework behaviour is altered to not interfere with the tests. 
<em>Please note that in PHPUNIT mode the framework does not automatically initialise the Router - you will have to run the code below to test a controller:</em> </p>

<pre><code>$router = new \Alo\Controller\Router();
$router-&gt;init(); //Or -&gt;initNoCall() if you just want to initialise it, but not call the relevant controller
</code></pre>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="latest-changes" class="anchor" href="#latest-changes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Latest changes</h1>

<p>See <a href="changelog.md">changelog.md</a> for a full changelog of previous versions.</p>

<h2>
<a id="10-2015-05-08" class="anchor" href="#10-2015-05-08" aria-hidden="true"><span class="octicon octicon-link"></span></a>1.0 (2015-05-08)</h2>

<p>Reworked</p>

<ul>
<li>Router fully reworked. Refer to README for documentation on the new router.</li>
</ul>

<p>Major bugfixes</p>

<ul>
<li>Fixed the error message (and subsequent die() statement) when the log level is set to LOG_LEVEL_DEBUG.</li>
</ul>

<p>Misc bugfixes</p>

<ul>
<li>Changed the event definition in setup/create_session_table_and_cleaner.sql to use the correct table name</li>
<li>Debug output in MemcachedWrapper-&gt;getAllMemcache() removed</li>
<li>Logger &amp; error handler paths fixed for PHPUNIT</li>
<li>Cookie clease tweaked for PHPUNIT</li>
<li>Fixed exception throwing if-else order in MemcachedSession. It now makes sure the MemcachedWrapper class is loaded and all its static properties are loaded before calling is_available()</li>
<li>Fixed multiple validation errors in the testing suite</li>
<li>Crontab should now correctly reload if it fetches an empty string</li>
<li>Fixed code line detection in log messages</li>
</ul>

<p>Added features</p>

<ul>
<li>It's now possible to force a session write operation during runtime via AbstractSession-&gt;forceWrite()</li>
<li>clear(), getTokenExpected() and getTokenActual() and refreshToken() added to AbstractSession</li>
<li>clearCrontab() method at crontab editor</li>
<li>Possibility to automatically commit crontab changes. Use with caution!</li>
<li>getAtIndex() method in Cron</li>
<li>\Alo\Statics\Security class added</li>
<li>__isset() and __unset() added to all classes that had __get() or __set() defined</li>
<li>\Alo\Statics\Format::is_ipv4_ip() method added</li>
</ul>

<p>Removed items</p>

<ul>
<li>Format::isBoolean()</li>
</ul>

<p>Miscellaneous</p>

<ul>
<li>Switched to ApiGen as the code documentation provider</li>
<li>SQLSession now uses the ALO_SESSION_TABLE_NAME instead of self::TABLE_NAME</li>
<li>json encode/decode removed from MemcachedSession write/fetch()</li>
<li>FormValidator documentation edit</li>
<li>Cron editor now throws an exception if you try to invoke it on a Windows machine</li>
<li>PHPUNIT_RUNNING constant definition moved out of source code. It now simply checks if the constant is defined in the bootstrap file.</li>
<li>The global functions getFingerprint(), getUniqid(), escape() moved to \Alo\Statics\Security. The escape() function has been renamed to un_xss() in the class.</li>
<li>DIR_CONTROLLERS constant added</li>
</ul>

<p>^<a href="#table-of-contents">TOC</a></p>

<hr>

<h1>
<a id="external-libraries" class="anchor" href="#external-libraries" aria-hidden="true"><span class="octicon octicon-link"></span></a>External Libraries</h1>

<p>AloFramework uses the following external libraries for its functionality:</p>

<ul>
<li>
<a href="https://github.com/PHPMailer/PHPMailer/">PHPMailer</a> for email support</li>
<li>
<a href="http://raveren.github.io/kint/">Kint</a> for debug output</li>
</ul>

<p>^<a href="#table-of-contents">TOC</a></p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-62540988-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>